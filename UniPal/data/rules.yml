version: "3.1"

rules:

- rule: Say goodbye anytime the user says goodbye
  steps:
  - intent: goodbye
  - action: utter_goodbye

- rule: Inform about services after greeting user
  steps:
  - action: utter_greet
  - action: action_UniPal_services
  - action: action_resetSlots

- rule: Inform about services after user asks
  steps:
  - intent: ask_about_services
  - action: action_UniPal_services
  - action: action_resetSlots

- rule: Reset slots before next request
  steps:
  - action: action_UniPal_services
  - action: action_resetSlots

- rule: Check exam schedule slots
  steps:
  - intent: request_exam_schedule
  - action: action_correct_examform_slots

- rule: Ask for next slot 
  steps:
  - intent: inform_programme
  - action: action_button_period_semester

- rule: Ask for next slot (exams | period->year)
  steps:
  - intent: inform_period
  - action: action_button_year

- rule: Ask for next slot (classes | semester->year)
  steps:
  - intent: inform_semester
  - action: action_button_year

- rule: Recheck slots after academic year slot filling (exams & classes)
  steps:
  - intent: inform_year
  - action: action_correct_examform_slots

# - rule: Activate exams flag
#   steps:
#   - intent: request_exam_schedule
#   - slot_was_set:
#     - exams: true

- rule: Check class schedule slots
  steps:
  - intent: request_class_schedule
  - action: action_correct_examform_slots

# - rule: Activate class flag (deactivate exams flag)
#   steps:
#   - intent: request_class_schedule
#   - slot_was_set:
#     - exams: false

- rule: Be polite
  steps:
  - intent: thank_bot
  - action: utter_welcome



# - rule: Fill programme type slot
#   steps:
#   - action: action_button_programme
#   - intent: inform_programme

# - rule: Fill exam period slot
#   - action: action_button_period
#   - intent: inform_period

# - rule: Fill academic year slot
#   - action: action_button_year
#   - intent: inform_year


# - rule: Give info on psychosupport
#   steps:
#   - intent: request_psychoSupport_info
#   - action: action_uni_psychoSupport_info

# - rule: Provide info on class timetable when user asks
#   steps:
#   - intent: request_class_schedule
#   - action: action_uni_class_schedule

# - rule: Provide info on exam timetable when user asks
  # steps:
  # - intent: request_exam_schedule
  # - action: utter_exam_schedule_year
  # - action: utter_exam_schedule_period
  # - action: utter_exam_schedule_programme
  # - action: action_uni_exam_schedule

# - rule: Activate exam schedule form
#   steps:
#   - intent: request_exam_schedule
#     entities: 
#       - exams: true
#   - action: exam_schedule_form
#   - action: action_correct_examform_slots
#   - active_loop: exam_schedule_form

# - rule: Activate class schedule form
#   steps:
#   - intent: request_class_schedule
#     entities: 
#         - exams: false
#   # - action: class_schedule_form
#   - active_loop: class_schedule_form